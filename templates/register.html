<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ثبت‌نام | لیبریس</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/flash.css') }}">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap">
</head>
<body>

  <!-- flash -->
  {% include "flash.html" %}

  <!-- Header -->
  {% include "header.html" %}

  <!-- Register Section -->
  <section class="register-section section">
    <div class="container">
      <div class="wrapper">
        <form action="{{ url_for('register') }}" method="POST">
          <h2>ثبت‌نام</h2>
          
          <div class="input-field">
            <input type="email" name="email" required>
            <label>ایمیل خود را وارد کنید</label>
          </div>
          
          <div class="input-field">
            <input type="password" name="password" id="passwordInput" minlength="5" required>
            <label>رمز عبور خود را وارد کنید</label>
          </div>
          
          <div class="password-generator">
            <button type="button" id="generatePassword" class="btn btn-outline">تولید رمز عبور</button>
            <div id="generatedPassword" class="generated-password"></div>
          </div>
          
          <div class="terms">
            <label for="agree">
              <input type="checkbox" id="agree" required>
              <p href="{{url_for ('tos')}}">قوانین و مقررات را می‌پذیرم</p>
            </label>
          </div>
          
          <button type="submit" class="btn btn-primary">ثبت‌نام</button>
          
          <div class="login-link">
            <p>حساب کاربری دارید؟ <a href="{{ url_for('login') }}">وارد شوید</a></p>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  {% include "footer.html" %}

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <script>
    $(document).ready(function() {
      $('#generatePassword').on('click', function(e) {
        e.preventDefault();
        
        // درخواست به سرور برای تولید رمز
        $.get("{{ url_for('password_generator') }}", function(data) {
          // نمایش رمز در صفحه
          $('#passwordInput').val(data.password);
          $('#generatedPassword').text('رمز تولید شده: ' + data.password);
        });
      });
    });
  </script>

</body>
</html>